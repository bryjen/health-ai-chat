@namespace WebFrontend.Components.Chat.StatusBubbles
@using WebFrontend.Models.Chat.StatusTypes
@using Microsoft.AspNetCore.Components

<div class="px-4 py-3 rounded-lg bg-muted text-foreground inline-flex items-center gap-2 max-w-fit">
    <span class="material-symbols-outlined text-sm text-green-400">assessment</span>
    <span class="text-sm">
        Assessment created: @Status.Hypothesis (Confidence: @(Status.Confidence.ToString("P0")))
    </span>
    @if (Status.AssessmentId > 0)
    {
        <a href="/assessments/@Status.AssessmentId" class="ml-1 text-primary hover:text-primary/80 underline text-sm"
           @onclick:preventDefault @onclick="NavigateToAssessment">View</a>
    }
</div>

@code {
    [Parameter]
    public required AssessmentCreatedStatus Status { get; set; }
    
    [Inject]
    private NavigationManager Navigation { get; set; } = default!;

    private void NavigateToAssessment()
    {
        Navigation.NavigateTo($"/assessments/{Status.AssessmentId}");
    }
}
