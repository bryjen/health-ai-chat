@namespace WebFrontend.Components.Core.Chat.StatusBubbles
@using WebFrontend.Components.UI.Shared

<div class="@GetClasses" @onclick="@(Status.AssessmentId > 0 ? NavigateToAssessment : (Action)(() => { }))">
    <span class="material-symbols-outlined text-sm text-green-400">assessment</span>
    <span class="text-xs">
        Assessment created: <b>@Status.Hypothesis</b> (Confidence: @(Status.Confidence.ToString("P0")))
        @if (Status.AssessmentId > 0)
        {
            <span class="ml-1 text-primary">View â†’</span>
        }
    </span>
</div>

@code {
    private string GetClasses => ClassBuilder.Merge(
        "px-4 py-3 rounded-full bg-muted/25 text-muted-foreground inline-flex items-center gap-2 max-w-fit border border-border",
        "transition-all duration-200 ease-in-out hover:brightness-150",
        Status.AssessmentId > 0 ? "cursor-pointer" : "");

    [Parameter]
    public required AssessmentCreatedStatus Status { get; set; }

    [Inject]
    private NavigationManager Navigation { get; set; } = default!;

    private void NavigateToAssessment()
    {
        if (Status.AssessmentId > 0)
        {
            Navigation.NavigateTo($"/assessments/{Status.AssessmentId}");
        }
    }
}
