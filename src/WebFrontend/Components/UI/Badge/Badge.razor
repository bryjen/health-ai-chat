@using WebFrontend.Components.UI.Shared
@namespace WebFrontend.Components.UI.Badge

@* Badge component with variant support *@
<span
    data-slot="badge"
    data-variant="@Variant"
    class="@GetClass()"
    @attributes="AdditionalAttributes">
    @ChildContent
</span>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public string Variant { get; set; } = "default";
    [Parameter] public string Size { get; set; } = "default";
    [Parameter] public string? Class { get; set; }
    [Parameter(CaptureUnmatchedValues = true)] public Dictionary<string, object>? AdditionalAttributes { get; set; }

    private string GetClass()
    {
        var baseClasses = "inline-flex items-center justify-center rounded-full border border-transparent w-fit whitespace-nowrap shrink-0 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-all duration-200 overflow-hidden";

        var sizeClasses = Size switch
        {
            "sm" => "px-1.5 py-0 text-[0.65rem] [&>svg]:size-2.5",
            "lg" => "px-2.5 py-1 text-sm [&>svg]:size-3.5",
            _ => "px-2 py-0.5 text-xs [&>svg]:size-3"
        };

        var variantClasses = Variant switch
        {
            "default" => "bg-primary text-primary-foreground [a&]:hover:bg-primary/90",
            "secondary" => "bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",
            "destructive" => "bg-destructive/60 text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/40",
            "outline" => "border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",
            "ghost" => "[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",
            "link" => "text-primary underline-offset-4 [a&]:hover:underline",
            _ => "bg-primary text-primary-foreground [a&]:hover:bg-primary/90"
        };

        return ClassBuilder.Merge(baseClasses, sizeClasses, variantClasses, Class);
    }
}
