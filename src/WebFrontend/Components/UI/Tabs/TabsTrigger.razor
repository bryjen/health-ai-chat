@using WebFrontend.Components.UI.Shared
@using WebFrontend.Components.UI.Tabs

@* Single tab trigger *@
<button
    data-slot="tabs-trigger"
    type="button"
    role="tab"
    aria-selected="@IsActive"
    class='@ClassBuilder.Merge(
        "relative inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-all",
        "text-foreground/60 hover:text-foreground dark:text-muted-foreground dark:hover:text-foreground",
        IsActive ? "bg-background text-foreground shadow-sm" : null,
        Class
    )'
    @onclick="Activate"
    @attributes="AdditionalAttributes">
    @ChildContent
</button>

@code {
    [CascadingParameter] private TabsContext? _context { get; set; }

    [Parameter] public string Value { get; set; } = string.Empty;
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public string? Class { get; set; }
    [Parameter(CaptureUnmatchedValues = true)] public Dictionary<string, object>? AdditionalAttributes { get; set; }

    private bool IsActive => _context?.Value == Value;

    private void Activate()
    {
        if (_context is null) return;
        _context.Value = Value;
    }
}

