@using WebFrontend.Components.UI.Shared
@* Dropdown menu radio item component *@
<div 
    data-slot="dropdown-menu-radio-item"
    class="@ClassBuilder.Merge("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4", Class)"
    @onclick="HandleClick"
    @attributes="AdditionalAttributes">
    <span class="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        @if (Checked)
        {
            <svg class="size-2 fill-current" viewBox="0 0 8 8">
                <circle cx="4" cy="4" r="4" />
            </svg>
        }
    </span>
    @ChildContent
</div>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public bool Checked { get; set; }
    [Parameter] public EventCallback<bool> CheckedChanged { get; set; }
    [Parameter] public string? Class { get; set; }
    [Parameter(CaptureUnmatchedValues = true)] public Dictionary<string, object>? AdditionalAttributes { get; set; }

    private async Task HandleClick()
    {
        if (!Checked)
        {
            Checked = true;
            await CheckedChanged.InvokeAsync(Checked);
        }
    }
}
