@using WebFrontend.Components.UI.Shared
@using WebFrontend.Components.UI.Accordion

@* Accordion trigger button *@
<button
    data-slot="accordion-trigger"
    type="button"
    class='@ClassBuilder.Merge("flex w-full items-start justify-between gap-4 py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] focus-visible:ring-ring/50 focus-visible:border-ring disabled:pointer-events-none disabled:opacity-50", Class, _context?.Open == true ? "" : null)'
    @onclick="Toggle"
    disabled="@Disabled"
    @attributes="AdditionalAttributes">
    <span>@ChildContent</span>
    <svg
        class='@ClassBuilder.Merge("text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200", _context?.Open == true ? "rotate-180" : null)'
        viewBox="0 0 24 24"
        aria-hidden="true">
        <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
</button>

@code {
    [CascadingParameter] private AccordionItemContext? _context { get; set; }

    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public string? Class { get; set; }
    [Parameter] public bool Disabled { get; set; }
    [Parameter(CaptureUnmatchedValues = true)] public Dictionary<string, object>? AdditionalAttributes { get; set; }

    private void Toggle()
    {
        _context?.Toggle();
    }
}

